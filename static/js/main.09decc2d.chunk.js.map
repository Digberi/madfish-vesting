{"version":3,"sources":["hooks/useBeacon.js","components/Button.js","utils/tokenMetadata.api.js","components/RefreshableButton.js","hooks/useRewards.js","components/TokenRow.js","components/Table.js","components/Explore.js","hooks/useTabs.js","components/Distribute.js","components/Stop.js","components/ChangeAdmin.js","components/Tab.js","components/Tabs.js","components/Header.js","components/Main.js","App.js","reportWebVitals.js","index.js"],"names":["contractAddress","DEFAULT_NETWORK","LambdaViewSigner","a","wallet","client","getActiveAccount","acc","Error","address","publicKey","michelEncoder","MichelCodecPacker","Tezos","TezosToolkit","BeaconWallet","name","iconUrl","forcePermission","setWalletProvider","setSignerProvider","setPackerProvider","loadFromTzktBigmap","id","limit","fetch","then","e","json","constate","useState","vestingContract","setVesting","pkh","setUserPkh","contract","setContract","storage","setStorage","connect","useCallback","disconnect","clearActiveAccount","requestPermissions","network","type","setRpcProvider","getPKH","loadContract","at","useEffect","isConnected","UseBeaconProvider","useBeacon","Button","variant","onClick","className","children","disabled","style","api","axios","create","baseURL","getTokensMetadata","timeout","get","r","data","metadata","RefreshableButton","callback","block","blockUpdate","interval","setInterval","handleRefresh","clearInterval","percentage","background","rewards","setRewards","loading","setLoading","loadRewards","vestings_counter","vestings","toNumber","newRewards","arr","map","_","index","value","loadingRewards","UseRewardsProvider","useRewards","tenIn18","BigNumber","pow","TokenRow","tokens","reward","handleClaim","claimParams","methodsObject","claim","batchOp","batch","withContractCall","send","token","length","symbol","decimals","tokenName","substring","tenInDecimals","treasury","speed","distr_speed_f","rewardAmount","collected","fullReward","div","dt","times","t0","Date","deadline","getTime","daysLeft","now","left","minus","leftLabel","lt","gt","toFixed","receiver","admin","Table","checkIfClaimable","TABS","label","component","setTokens","loadTokensMetadata","console","log","newTokens","i","asset","fa2","toString","fa12","thumbnailUri","push","claimAll","userRewards","filter","x","reduce","setValue","errorJSON","setJSONError","assetId","amount","setFormValue","handleChange","handleFormValue","target","prev","makeRpcCall","opParams","makeParams","isTez","assetParam","isFa2","Number","tez","amountParam","deadlineParam","dividedToIntegerBy","tx_prm","vestingParams","start_vesting","tokenContract","addOperatorParams","methods","update_operators","add_operator","owner","operator","token_id","removeOperatorParams","remove_operator","vestingParamsTez","shiftedBy","toTransferParams","withTransfer","approveParams","approve","placeholder","onChange","JSON","parse","message","params","Array","isArray","vestingId","setVestingId","handleStopVesting","stopVestingParams","stop_vesting","adminAddr","setAdminAddr","handleSetAdmin","adminAddress","adminParams","set_admin","currentTab","setCurrentTab","UseTabsProvider","useTabs","Tab","selected","isAdmin","href","Tabs","Header","handleConnect","catch","tab","slice","Main","SelectedTab","React","handleSetValue","App","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.09decc2d.chunk.js","sourcesContent":["import { useCallback, useState, useEffect } from \"react\";\nimport constate from \"constate\";\n\nimport { BeaconWallet } from \"@taquito/beacon-wallet\";\nimport { MichelCodecPacker, TezosToolkit } from \"@taquito/taquito\";\n\n// TESTNET\n// export const contractAddress = \"KT1QwVmmYNp3Ke2JkNr2eaAdYyAJFusbi7yH\";\n\n// const DEFAULT_NETWORK = {\n//   id: \"ithacanet\",\n//   nextNetworkIndex: 1,\n//   name: \"Ithacanet\",\n//   type: \"testnet\",\n//   rpcBaseURL: \"https://ithacanet.smartpy.io\",\n// };\n\n// MAINNET\nexport const contractAddress = \"KT1N5HyBD5HZ7NZwmDar1LmBN7WkHbdr6zb9\";\nexport const bigmapId = '141266';\n\nconst DEFAULT_NETWORK = {\n  id: \"mainnet\",\n  nextNetworkIndex: 1,\n  name: \"Mainnet\",\n  type: \"main\",\n  rpcBaseURL: \"https://uoi3x99n7c.tezosrpc.midl.dev\",\n};\n\nclass LambdaViewSigner {\n  async publicKeyHash() {\n    const acc = await wallet.client.getActiveAccount();\n    if (!acc) throw new Error(\"Not connected\");\n    return acc.address;\n  }\n  async publicKey() {\n    const acc = await wallet.client.getActiveAccount();\n    if (!acc) throw new Error(\"Not connected\");\n    return acc.publicKey;\n  }\n  async secretKey() {\n    throw new Error(\"Secret key cannot be exposed\");\n  }\n  async sign() {\n    throw new Error(\"Cannot sign\");\n  }\n}\n\nconst options = {\n  name: \"Madfish Vesting\",\n  iconUrl: \"https://tezostaquito.io/img/favicon.png\",\n};\n\nconst michelEncoder = new MichelCodecPacker();\n\nconst Tezos = new TezosToolkit(DEFAULT_NETWORK.rpcBaseURL);\nconst wallet = new BeaconWallet(options, { forcePermission: true });\nTezos.setWalletProvider(wallet);\nTezos.setSignerProvider(new LambdaViewSigner());\nTezos.setPackerProvider(michelEncoder);\n\nexport const loadFromTzktBigmap = async (id, limit) => {\n  return await fetch(`https://api.tzkt.io/v1/bigmaps/${id}/keys?limit=${limit}`).then(e => e.json())\n}\n\nexport const [UseBeaconProvider, useBeacon] = constate(() => {\n  const [vestingContract, setVesting] = useState(contractAddress);\n  const [pkh, setUserPkh] = useState('');\n  const [contract, setContract] = useState(null);\n  const [storage, setStorage] = useState(null);\n\n  const connect = useCallback(async () => {\n    await wallet.disconnect();\n    await wallet.clearActiveAccount();\n    await wallet.requestPermissions({\n      network: { type: DEFAULT_NETWORK.id },\n    });\n    Tezos.setWalletProvider(wallet);\n    Tezos.setRpcProvider(DEFAULT_NETWORK.rpcBaseURL);\n    const activeAcc = await wallet.client.getActiveAccount();\n    if (!activeAcc) {\n      throw new Error(\"Not connected\");\n    }\n    setUserPkh(await wallet.getPKH());\n  }, []);\n\n  const disconnect = useCallback(async () => {\n    await wallet.disconnect();\n    await wallet.clearActiveAccount();\n    Tezos.setWalletProvider(wallet);\n    setUserPkh('');\n  }, []);\n\n  const loadContract = useCallback(async () => {\n    const contract = await Tezos.contract.at(vestingContract);\n    setContract(contract);\n    const storage = await contract.storage();\n    setStorage(storage);\n  }, [vestingContract]);\n\n  useEffect(() => {\n    loadContract();\n  }, [loadContract]);\n\n  const handleSetVesting = (address) => {\n    setStorage(null);\n    setContract(null);\n    setVesting(address);\n  }\n\n  return {\n    connect,\n    disconnect,\n    isConnected: !!pkh,\n    setVesting: handleSetVesting,\n    vestingContract,\n    Tezos,\n    wallet,\n    pkh,\n    contract,\n    storage,\n  };\n});\n\nexport default useBeacon;\n","import React from \"react\";\n\nexport const Button = ({\n  variant = \"filled\",\n  onClick,\n  className,\n  children,\n  disabled = false,\n  style,\n}) => {\n  return (\n    <button\n      onClick={onClick}\n      disabled={disabled}\n      className={`button ${variant} ${\n        disabled && \"button-disabled\"\n      } ${className}`}\n      style={style}\n    >\n      {children}\n    </button>\n  );\n};\n","import axios from \"axios\";\n\nconst api = axios.create({ baseURL: \"https://metadata.templewallet.com\" });\n\nexport async function getTokensMetadata(address, id, timeout = 15000) {\n  const metadata = await api\n    .get(`metadata/${address}/${id}`, { timeout })\n    .then((r) => r.data);\n  return metadata;\n}\n","import React, { useEffect, useState } from \"react\";\nimport { Button } from \"./Button\";\n\nexport const BLOCK_TIME = 30;\nconst ONE_SEC = 1000;\n\nexport const RefreshableButton = ({ callback }) => {\n  const [block, blockUpdate] = useState(0);\n\n  useEffect(() => {\n    const interval = setInterval(() => {\n      blockUpdate(block + 1);\n    }, ONE_SEC);\n\n    if (block > BLOCK_TIME) {\n      handleRefresh();\n    }\n\n    return () => {\n      clearInterval(interval);\n    };\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [block]);\n\n  const handleRefresh = () => {\n    blockUpdate(0);\n    callback();\n  };\n  const percentage = ((BLOCK_TIME - block) / BLOCK_TIME) * 100;\n  return (\n    <Button\n      onClick={handleRefresh}\n      style={{\n        background: `linear-gradient(90deg, rgb(33, 150, 243) ${percentage}%, rgb(60, 170, 243) ${percentage}%)`,\n      }}\n    >\n      Refresh\n    </Button>\n  );\n};\n","import { useCallback, useState, useEffect } from \"react\";\nimport constate from \"constate\";\n\nimport useBeacon, { loadFromTzktBigmap } from \"./useBeacon\";\n\nexport const [UseRewardsProvider, useRewards] = constate(() => {\n  const { storage } = useBeacon();\n  const [rewards, setRewards] = useState([]);\n  const [loading, setLoading] = useState(true);\n\n  const loadRewards = useCallback(async () => {\n    if (!storage || !storage.vestings_counter) {\n      setLoading(true);\n      return;\n    }\n    const limit = storage.vestings_counter;\n    const newRewards = await loadFromTzktBigmap(storage.vestings.id.toNumber(), limit);\n    const arr = newRewards.map((_, index) => ({ ..._.value, id: index }))\n    setRewards(arr);\n    setLoading(false);\n  }, [storage]);\n\n  useEffect(() => {\n    loadRewards();\n  }, [loadRewards]);\n\n  return {\n    rewards,\n    loadingRewards: loading,\n    loadRewards,\n  };\n});\n","import React, { useCallback } from \"react\";\nimport useBeacon from \"../hooks/useBeacon\";\nimport BigNumber from \"bignumber.js\";\nimport { Button } from \"./Button\";\n\nconst tenIn18 = new BigNumber(10).pow(18);\n\nexport const TokenRow = ({ tokens, index, reward }) => {\n  const { contract, pkh, Tezos } = useBeacon();\n\n  const handleClaim = useCallback(\n    async (id) => {\n      if (!contract) return;\n      const claimParams = contract.methodsObject.claim(id);\n      const batchOp = Tezos.wallet.batch().withContractCall(claimParams);\n      await batchOp.send();\n    },\n    [contract, Tezos.wallet]\n  );\n  const token =\n    tokens.length > 0\n      ? {\n        symbol: tokens[index].symbol,\n        decimals: tokens[index].decimals,\n      }\n      : { symbol: \"Loading\", decimals: 6 };\n  const tokenName = token.symbol.substring(0, 7) + \"...\";\n  const tenInDecimals = new BigNumber(10).pow(token.decimals)\n  const treasury = new BigNumber(reward.treasury)\n  const speed = new BigNumber(reward.distr_speed_f)\n  const rewardAmount = new BigNumber(reward.collected)\n  const fullReward = treasury.div(\n    tenInDecimals\n  );\n  const collected = rewardAmount.div(\n    tenInDecimals\n  );\n\n  const dt = treasury.times(tenIn18.times(1000)).div(speed)\n\n  const t0 = new Date(reward.deadline).getTime() - dt.toNumber();\n\n  const daysLeft = Date.now() < new Date(reward.deadline).getTime() ? (new Date(reward.deadline).getTime() - Date.now()) / (1000 * 60 * 60 * 24) : 0;\n\n  const left = Date.now() < new Date(reward.deadline).getTime() ? treasury.times((Date.now() - t0) / dt).minus(rewardAmount).div(tenInDecimals) : new BigNumber(-1)\n  const leftLabel = left.lt(0) ? 'All collected' : left.gt(fullReward.minus(collected)) ? `${fullReward.minus(collected).toFixed(1)} ${tokenName}` : `${left.toFixed(1)} ${tokenName}`\n  return (\n    <tr>\n      <td>\n        {fullReward.toFixed(1)} {tokenName}\n      </td>\n      <td>\n        {collected.toFixed(1)} {tokenName}\n      </td>\n      <td>\n        {/* {left.toFixed()} */}\n        {leftLabel}\n      </td>\n      <td>\n        {daysLeft.toFixed(0)} days\n        {/* ({new Date(reward.deadline).toDateString()}) */}\n      </td>\n      <td>\n        {(reward.receiver === pkh || reward.admin === pkh) && (<Button\n          disabled={!pkh || left.toFixed(1) === \"0.0\"}\n          onClick={() => handleClaim(reward.id)}\n        >\n          {reward.admin === pkh ? 'Claim as Admin' : 'Claim'}\n        </Button>)}\n      </td>\n    </tr>\n  );\n};\n","import React from \"react\";\nimport { useRewards } from \"../hooks/useRewards\";\nimport { TokenRow } from './TokenRow';\n\nexport const Table = ({ rewards, tokens }) => {\n  const { loadingRewards: loading } = useRewards();\n\n  return (\n    <table>\n      <thead>\n        <tr>\n          <th>Full Reward</th>\n          <th>Claimed</th>\n          <th>Pending</th>\n          <th>Ends in</th>\n          <th>{/* action button */}</th>\n        </tr>\n      </thead>\n      <tbody>\n        {rewards.length === 0 ? (\n          loading ? (\n            <tr>\n              <td></td>\n              <td></td>\n              <td>Loading</td>\n            </tr>\n          ) : (\n            <tr>\n              <td></td>\n              <td></td>\n              <td>Not found</td>\n            </tr>\n          )\n        ) : (\n          rewards.map((reward) => <TokenRow key={reward.id} reward={reward} index={reward.id} tokens={tokens} />)\n        )}\n      </tbody>\n    </table>\n  );\n};\n","import React, { useCallback, useEffect, useState } from \"react\";\nimport useBeacon from \"../hooks/useBeacon\";\nimport { getTokensMetadata } from \"../utils/tokenMetadata.api\";\nimport { RefreshableButton } from \"./RefreshableButton\";\nimport { useRewards } from \"../hooks/useRewards\";\nimport { Table } from './Table';\nimport { Button } from \"./Button\";\nimport BigNumber from \"bignumber.js\";\n\nconst tenIn18 = new BigNumber(10).pow(18);\n\nconst checkIfClaimable = (reward) => {\n  const tenInDecimals = new BigNumber(10).pow(6)\n  const treasury = new BigNumber(reward.treasury)\n  const speed = new BigNumber(reward.distr_speed_f)\n  const rewardAmount = new BigNumber(reward.collected)\n\n\n  const dt = treasury.times(tenIn18.times(1000)).div(speed)\n\n  const t0 = new Date(reward.deadline).getTime() - dt.toNumber();\n\n\n  const left = Date.now() < new Date(reward.deadline).getTime() ? treasury.times((Date.now() - t0) / dt).minus(rewardAmount).div(tenInDecimals) : new BigNumber(-1);\n\n  return left.gt(0.1);\n}\n\nexport const Explore = () => {\n  const { contract, pkh, Tezos } = useBeacon();\n  const [tokens, setTokens] = useState([]);\n  const { rewards, loadRewards } = useRewards();\n\n  const loadTokensMetadata = useCallback(async () => {\n    if (rewards.length === 0) {\n      return;\n    }\n    console.log('loadTokensMetadata');\n    let newTokens = [];\n    for (var i = 0; i < rewards.length; i++) {\n      let token = null;\n      if (rewards[i].asset[\"fa2\"]) {\n        token = await getTokensMetadata(\n          rewards[i].asset.fa2.token,\n          rewards[i].asset.fa2.id.toString()\n        );\n      } else if (rewards[i].asset[\"fa12\"]) {\n        token = await getTokensMetadata(rewards[i].asset.fa12, 0);\n      } else {\n        token = {\n          decimals: 6,\n          name: \"TEZ\",\n          symbol: \"TEZ\",\n          thumbnailUri:\n            \"https://upload.wikimedia.org/wikipedia/commons/thumb/3/33/Tezos_logo.svg/100px-Tezos_logo.svg.png\",\n        };\n      }\n\n      newTokens.push(token);\n    }\n    setTokens(newTokens);\n  }, [rewards]);\n\n  useEffect(() => {\n    loadTokensMetadata();\n  }, [loadTokensMetadata]);\n\n\n  const claimAll = useCallback(async () => {\n    if (!contract) return;\n\n    const userRewards = rewards.filter(x => x.receiver === pkh)\n\n    const batchOp = userRewards.filter(checkIfClaimable).reduce((acc, reward) => {\n      const claimParams = contract.methodsObject.claim(reward.id);\n      return acc.withContractCall(claimParams);\n    }, Tezos.wallet.batch())\n\n    await batchOp.send();\n\n  }, [Tezos.wallet, contract, pkh, rewards]);\n\n  return (\n    <section>\n      <div className=\"search-bar\"></div>\n\n      <div className=\"your-rewards\">\n        <h3 className='pad'>Your rewards:</h3>\n        <Button disabled={!pkh} onClick={claimAll}>Claim all</Button>\n      </div>\n      <Table tokens={tokens} rewards={rewards.filter(x => x.receiver === pkh || x.admin === pkh)} />\n      <h3 className='pad'>All rewards:</h3>\n      <Table tokens={tokens} rewards={rewards.filter(x => x.receiver !== pkh)} />\n      {pkh && (\n        <RefreshableButton callback={() => loadRewards()} />\n      )}\n    </section>\n  );\n};\n","import constate from \"constate\";\nimport { useState } from \"react\";\nimport { ChangeAdmin } from \"../components/ChangeAdmin\";\nimport { Distribute } from \"../components/Distribute\";\nimport { Explore } from \"../components/Explore\";\nimport { Stop } from \"../components/Stop\";\n\nconst TABS = [\n  { label: \"Explore\", component: Explore },\n  { label: \"Distribute\", component: Distribute, admin: true },\n  { label: \"Stop vesting\", component: Stop, admin: true },\n  { label: \"Change Admin\", component: ChangeAdmin, admin: true },\n];\n\nexport const [UseTabsProvider, useTabs] = constate(() => {\n  const [currentTab, setCurrentTab] = useState(0);\n\n  return { currentTab, setCurrentTab, TABS };\n});\n","import React, { useState } from \"react\";\nimport BigNumber from \"bignumber.js\";\nimport useBeacon, { contractAddress } from \"../hooks/useBeacon\";\nimport { Button } from \"./Button\";\n\nexport const Distribute = () => {\n  const [value, setValue] = useState(\"\");\n  const [errorJSON, setJSONError] = useState(null);\n  const { contract, storage, pkh, Tezos } = useBeacon();\n\n  const [{ asset, assetId, amount, receiver, deadline }, setFormValue] =\n    useState({\n      asset: \"\",\n      assetId: \"\",\n      amount: \"\",\n      receiver: \"\",\n      deadline: \"\",\n    });\n\n  const handleChange = (e) => {\n    handleFormValue(e.target.name, e.target.value);\n  };\n\n  const handleFormValue = (name, value) => {\n    setFormValue((prev) => ({ ...prev, [name]: value }));\n  };\n\n  const handleChangeTextArea = (e) => {\n    setJSONError(null);\n    setValue(e.target.value);\n    try {\n      JSON.parse(e.target.value);\n    } catch (e) {\n      setJSONError(`Invalid JSON: ${e.message}`);\n    }\n  };\n\n  const handleDistributeForm = () =>\n    makeRpcCall([{ asset, assetId, amount, receiver, deadline }]);\n\n  const handleDistributeJSON = () => {\n    if (errorJSON) {\n      return;\n    }\n    const params = JSON.parse(value);\n    if (Array.isArray(params)) {\n      makeRpcCall(params);\n    } else {\n      makeRpcCall([params]);\n    }\n  };\n\n  const makeRpcCall = async (opParams) => {\n    try {\n      let batchOp = Tezos.wallet.batch();\n      for (var i = 0; i < opParams.length; i++) {\n        batchOp = await makeParams(opParams[i], batchOp);\n      }\n      batchOp.send();\n    } catch (e) {\n      console.log(\"error in makeRpcCall\", e);\n    }\n  };\n\n  const makeParams = async (\n    { asset, assetId, amount, receiver, deadline },\n    batchOp\n  ) => {\n    const isFa2 = !!assetId || assetId === \"0\";\n    const isTez = asset === \"tz\";\n    const assetParam = isFa2\n      ? { fa2: { token: asset, id: Number(assetId) } } //{ token: asset, id: new BigNumber(assetId) } //\n      : isTez\n      ? { tez: null }\n      : { fa12: asset };\n\n    const amountParam = new BigNumber(amount);\n    const deadlineParam = new BigNumber(\n      new Date(deadline).getTime()\n    ).dividedToIntegerBy(1000);\n    const tx_prm = {\n      asset: assetParam,\n      amount: amountParam,\n      receiver: receiver,\n      deadline: deadlineParam,\n    };\n    const vestingParams = contract.methodsObject.start_vesting(tx_prm);\n    try {\n      if (isFa2) {\n        const tokenContract = await Tezos.contract.at(asset);\n        const addOperatorParams = tokenContract.methods.update_operators([\n          {\n            add_operator: {\n              owner: pkh,\n              operator: contractAddress,\n              token_id: assetId,\n            },\n          },\n        ]);\n        const removeOperatorParams = tokenContract.methods.update_operators([\n          {\n            remove_operator: {\n              owner: pkh,\n              operator: contractAddress,\n              token_id: assetId,\n            },\n          },\n        ]);\n        batchOp = batchOp\n          .withContractCall(addOperatorParams)\n          .withContractCall(vestingParams)\n          .withContractCall(removeOperatorParams);\n      } else if (isTez) {\n        const vestingParamsTez = contract.methodsObject\n          .start_vesting({\n            ...tx_prm,\n            amount: new BigNumber(amountParam).shiftedBy(6),\n          })\n          .toTransferParams({ amount: amountParam });\n        batchOp = batchOp.withTransfer(vestingParamsTez);\n      } else {\n        const tokenContract = await Tezos.contract.at(asset);\n        const approveParams = tokenContract.methods.approve(\n          contractAddress,\n          amount\n        );\n        batchOp = batchOp\n          .withContractCall(approveParams)\n          .withContractCall(vestingParams);\n      }\n      return batchOp;\n    } catch (e) {\n      console.log(e);\n    }\n  };\n  return (\n    <section>\n      <div className=\"section-content\">\n        <h3>Fill form</h3>\n        <div className=\"fill-form\">\n          <div>\n            <label>Asset Address</label>\n            <input\n              name=\"asset\"\n              value={asset}\n              placeholder={\"tz or Token Address\"}\n              onChange={handleChange}\n            />\n          </div>\n          <div>\n            <label>Asset Id</label>\n            <input\n              name=\"assetId\"\n              value={assetId}\n              placeholder={\"for FA2\"}\n              onChange={handleChange}\n            />\n          </div>\n          <div>\n            <label>Amount</label>\n            <input\n              name=\"amount\"\n              value={amount}\n              placeholder={\"amount\"}\n              onChange={handleChange}\n            />\n          </div>\n          <div>\n            <label>Receiver</label>\n            <input\n              name=\"receiver\"\n              value={receiver}\n              placeholder={\"receiver\"}\n              onChange={handleChange}\n            />\n          </div>\n          <div>\n            <label>Deadline</label>\n            <input\n              name=\"deadline\"\n              value={deadline}\n              type=\"date\"\n              placeholder={\"deadline\"}\n              onChange={handleChange}\n            />\n          </div>\n          <Button\n            disabled={storage && pkh !== storage.admin}\n            onClick={handleDistributeForm}\n            className=\"distribute-button\"\n          >\n            Distribute\n          </Button>\n        </div>\n        <h3>Or use JSON text</h3>\n        <div>\n          <div className=\"textarea\">\n            <textarea\n              value={value}\n              onChange={handleChangeTextArea}\n              placeholder='{ receiver:\"tz1...\", amount: \"100\" }'\n            />\n          </div>\n          {errorJSON && typeof errorJSON === \"string\" && (\n            <div className=\"textarea-error\">{errorJSON}</div>\n          )}\n\n          <label>Example:</label>\n          <pre>{`\n[{\n  \"amount\": \"1234\",\n  \"asset\": \"KT19H9YbHqsxFTayap7aTEfbcnyPeALKYgt9\",\n  \"assetId\": \"0\",\n  \"deadline\": \"2022-05-26\",\n  \"receiver\": \"tz1VvDQcafAxpAcc2hFWDpSmRYqdEmEhrW1h\"\n}]\n    `}</pre>\n\n          <Button\n            disabled={storage && pkh !== storage.admin}\n            onClick={handleDistributeJSON}\n            className=\"distribute-button\"\n          >\n            Distribute\n          </Button>\n        </div>\n      </div>\n    </section>\n  );\n};\n","import React, { useState, useCallback } from \"react\";\nimport useBeacon from \"../hooks/useBeacon\";\nimport { Button } from \"./Button\";\n\nexport const Stop = () => {\n  const { contract, storage, pkh, Tezos } = useBeacon();\n\n  const [vestingId, setVestingId] = useState(\"\");\n\n  const handleStopVesting = useCallback(\n    async (id) => {\n      if (!contract) return;\n      const stopVestingParams = contract.methodsObject.stop_vesting(id);\n      const batchOp = Tezos.wallet.batch().withContractCall(stopVestingParams);\n      await batchOp.send();\n    },\n    [contract, Tezos.wallet]\n  );\n\n  return (\n    <section>\n      <div className=\"section-content\">\n        <h3>Stop vesting by id</h3>\n        <div>\n          <div>\n            <input\n              name=\"vestingId\"\n              value={vestingId}\n              placeholder={\"vestingId\"}\n              onChange={(e) => setVestingId(e.target.value)}\n            />\n          </div>\n          <Button\n            disabled={storage && pkh !== storage.admin}\n            onClick={handleStopVesting}\n            className=\"distribute-button\"\n          >\n            Stop Vesting\n          </Button>\n        </div>\n      </div>\n    </section>\n  );\n};\n","import React, { useState, useCallback } from \"react\";\nimport useBeacon from \"../hooks/useBeacon\";\nimport { Button } from \"./Button\";\n\nexport const ChangeAdmin = () => {\n  const { contract, storage, pkh, Tezos } = useBeacon();\n\n  const [adminAddr, setAdminAddr] = useState(\"\");\n\n  const handleSetAdmin = useCallback(\n    async (adminAddress) => {\n      if (!contract) return;\n      const adminParams = contract.methodsObject.set_admin(adminAddress);\n      const batchOp = Tezos.wallet.batch().withContractCall(adminParams);\n      await batchOp.send();\n    },\n    [contract, Tezos.wallet]\n  );\n\n  return (\n    <section>\n      <div className=\"section-content\">\n        <h3>Change Admin</h3>\n        <div>\n          <div>\n            <input\n              name=\"adminAddr\"\n              value={adminAddr}\n              placeholder={\"new admin address\"}\n              onChange={(e) => setAdminAddr(e.target.value)}\n            />\n          </div>\n          <Button\n            disabled={storage && pkh !== storage.admin}\n            onClick={handleSetAdmin}\n            className=\"distribute-button\"\n          >\n            Set admin\n          </Button>\n        </div>\n      </div>\n    </section>\n  );\n};\n","/* eslint-disable jsx-a11y/anchor-is-valid */\nimport React from \"react\";\nimport useBeacon from \"../hooks/useBeacon\";\n\nexport const Tab = ({\n  onClick,\n  selected = false,\n  disabled,\n  admin,\n  children,\n}) => {\n  const { storage, pkh } = useBeacon();\n  const isAdmin = storage && storage.admin === pkh && admin;\n  const handleClick = () => {\n    if (onClick && !disabled) {\n      if (admin && !isAdmin) return false;\n      onClick();\n    }\n  };\n\n  return (\n    <div\n      className={`material-tabs-content ${\n        (disabled || (admin && !isAdmin)) && \"material-tabs-disabled\"\n      }`}\n    >\n      <a onClick={handleClick} className=\"material-tabs-content\" href=\"#\">\n        {children}\n      </a>\n      {selected && <div className=\"material-tabs-underline\"></div>}\n    </div>\n  );\n};\n","import React from \"react\";\n\nexport const Tabs = ({ children }) => {\n  return (\n    <div className=\"material-tabs\">\n      {children}\n      <span className=\"yellow-bar\"></span>\n    </div>\n  );\n};\n","import React from \"react\";\nimport useBeacon from \"../hooks/useBeacon\";\nimport { useTabs } from \"../hooks/useTabs\";\nimport { Button } from \"./Button\";\nimport { Tab } from \"./Tab\";\nimport { Tabs } from \"./Tabs\";\n\nexport const Header = () => {\n  const { connect, disconnect, pkh } = useBeacon();\n  const { TABS, currentTab, setCurrentTab } = useTabs();\n\n  const handleConnect = () => {\n    connect().catch(console.log);\n  };\n\n  const handleDisconnect = () => {\n    disconnect().catch(console.log);\n  };\n  return (\n    <header className=\"App-header\">\n      <Tabs>\n        {TABS.map((tab, index) => (\n          <Tab\n            onClick={() => setCurrentTab(index)}\n            selected={currentTab === index}\n            key={index}\n            admin={tab.admin}\n          >\n            {tab.label}\n          </Tab>\n        ))}\n      </Tabs>\n      <div className=\"header-buttons\">\n        {!pkh && <Button onClick={handleConnect}>Connect</Button>}\n        {pkh && typeof pkh === \"string\" && (\n          <Button variant={\"outlined\"} onClick={handleConnect}>\n            {pkh.slice(0, 6)}...${pkh.slice(-3)}\n          </Button>\n        )}\n        {pkh && (\n          <Button onClick={handleDisconnect} variant=\"filled\">\n            Disconnect\n          </Button>\n        )}\n      </div>\n    </header>\n  );\n};\n","import React from \"react\";\nimport useBeacon from '../hooks/useBeacon';\nimport { useTabs } from \"../hooks/useTabs\";\nimport { Button } from './Button';\n\nexport const Main = () => {\n  const { TABS, currentTab } = useTabs();\n  const SelectedTab = TABS[currentTab].component;\n  const { vestingContract, setVesting } = useBeacon();\n  const [value, setValue] = React.useState(vestingContract)\n\n  const handleSetValue = (value) => {\n    setValue(value);\n  }\n\n  const handleSubmit = () => {\n    setVesting(value);\n  }\n\n  return (\n    <main>\n      <div className='exploreVesting'>\n        <div className='vestingCol'>\n          Explore another vesting:\n          <input value={value} onChange={e => handleSetValue(e.target.value)} />\n        </div>\n        <Button variant={\"outlined\"} onClick={handleSubmit}>\n          Show\n        </Button>\n      </div>\n      <SelectedTab />\n    </main>\n  );\n};\n","import React from \"react\";\nimport \"./material-button.css\";\nimport \"./material-tabs.css\";\nimport \"./App.css\";\nimport { Header } from \"./components/Header\";\nimport { Main } from \"./components/Main\";\nfunction App() {\n  return (\n    <div className=\"App\">\n      <Header />\n      <Main />\n    </div>\n  );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\nimport reportWebVitals from \"./reportWebVitals\";\nimport { UseBeaconProvider } from \"./hooks/useBeacon\";\nimport { UseRewardsProvider } from \"./hooks/useRewards\";\nimport { UseTabsProvider } from \"./hooks/useTabs\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <UseBeaconProvider>\n      <UseRewardsProvider>\n        <UseTabsProvider>\n          <App />\n        </UseTabsProvider>\n      </UseRewardsProvider>\n    </UseBeaconProvider>\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}