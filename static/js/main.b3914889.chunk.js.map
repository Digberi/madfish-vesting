{"version":3,"sources":["hooks/useBeacon.js","components/Button.js","utils/tokenMetadata.api.js","components/Explore.js","hooks/useTabs.js","components/Distribute.js","components/Tab.js","components/Tabs.js","components/Header.js","components/Main.js","App.js","reportWebVitals.js","index.js"],"names":["DEFAULT_NETWORK","LambdaViewSigner","a","wallet","client","getActiveAccount","acc","Error","address","publicKey","Tezos","TezosToolkit","BeaconWallet","name","iconUrl","setWalletProvider","setSignerProvider","constate","useState","pkh","setUserPkh","contract","setContract","storage","setStorage","connect","useCallback","disconnect","clearActiveAccount","requestPermissions","network","type","setRpcProvider","getPKH","undefined","loadContract","at","useEffect","isConnected","UseBeaconProvider","useBeacon","Button","variant","onClick","className","children","disabled","api","axios","create","baseURL","getTokensMetadata","id","timeout","get","then","r","data","metadata","TABS","label","component","value","setValue","errorJSON","setJSONError","asset","amount","receiver","deadline","setFormValue","handleChange","e","handleFormValue","target","prev","makeRpcCall","vestingParams","methods","start_vesting","BigNumber","multipliedBy","toFixed","send","console","log","alert","JSON","stringify","placeholder","onChange","admin","parse","message","rewards","setRewards","tokens","setTokens","loading","setLoading","loadRewards","vestings_counter","limit","arr","i","vestings","vesting","push","filter","x","loadTokensMetadata","length","token","fa2","toString","fa12","decimals","symbol","thumbnailUri","handleClaim","claim","catch","map","reward","index","tokenName","fullReward","treasury","div","times","collected","left","minus","Date","toDateString","currentTab","setCurrentTab","UseTabsProvider","useTabs","Tab","selected","href","Tabs","Header","handleConnect","tab","slice","Main","SelectedTab","App","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.b3914889.chunk.js","sourcesContent":["import { useCallback, useState, useEffect } from \"react\";\nimport constate from \"constate\";\n\nimport { BeaconWallet } from \"@taquito/beacon-wallet\";\nimport { TezosToolkit } from \"@taquito/taquito\";\n\n// TESTNET\n// const contractAddress = \"KT1QwVmmYNp3Ke2JkNr2eaAdYyAJFusbi7yH\";\n\n// const DEFAULT_NETWORK = {\n//   id: \"ithacanet\",\n//   nextNetworkIndex: 1,\n//   name: \"Ithacanet\",\n//   type: \"testnet\",\n//   rpcBaseURL: \"https://ithacanet.smartpy.io\",\n// };\n\n// MAINNET\nconst contractAddress = \"KT1N5HyBD5HZ7NZwmDar1LmBN7WkHbdr6zb9\";\n\nconst DEFAULT_NETWORK = {\n  id: \"mainnet\",\n  nextNetworkIndex: 1,\n  name: \"Mainnet\",\n  type: \"main\",\n  rpcBaseURL: \"https://mainnet.smartpy.io\",\n};\n\nclass LambdaViewSigner {\n  async publicKeyHash() {\n    const acc = await wallet.client.getActiveAccount();\n    if (!acc) throw new Error(\"Not connected\");\n    return acc.address;\n  }\n  async publicKey() {\n    const acc = await wallet.client.getActiveAccount();\n    if (!acc) throw new Error(\"Not connected\");\n    return acc.publicKey;\n  }\n  async secretKey() {\n    throw new Error(\"Secret key cannot be exposed\");\n  }\n  async sign() {\n    throw new Error(\"Cannot sign\");\n  }\n}\n\nconst options = {\n  name: \"FA2 deployer\",\n  iconUrl: \"https://tezostaquito.io/img/favicon.png\",\n};\n\nconst Tezos = new TezosToolkit(DEFAULT_NETWORK.rpcBaseURL);\nconst wallet = new BeaconWallet(options);\nTezos.setWalletProvider(wallet);\nTezos.setSignerProvider(new LambdaViewSigner());\n\nexport const [UseBeaconProvider, useBeacon] = constate(() => {\n  const [pkh, setUserPkh] = useState();\n  const [contract, setContract] = useState(null);\n  const [storage, setStorage] = useState(null);\n\n  const connect = useCallback(async () => {\n    await wallet.disconnect();\n    await wallet.clearActiveAccount();\n    await wallet.requestPermissions({\n      network: { type: DEFAULT_NETWORK.id },\n    });\n    Tezos.setWalletProvider(wallet);\n    Tezos.setRpcProvider(DEFAULT_NETWORK.rpcBaseURL);\n    const activeAcc = await wallet.client.getActiveAccount();\n    if (!activeAcc) {\n      throw new Error(\"Not connected\");\n    }\n    setUserPkh(await wallet.getPKH());\n  }, []);\n\n  const disconnect = useCallback(async () => {\n    await wallet.disconnect();\n    await wallet.clearActiveAccount();\n    Tezos.setWalletProvider(wallet);\n    setUserPkh(undefined);\n  }, []);\n\n  const loadContract = useCallback(async () => {\n    const contract = await Tezos.contract.at(contractAddress);\n    // console.log(contract);\n    setContract(contract);\n    const storage = await contract.storage();\n    setStorage(storage);\n    // console.log(storage);\n    // const admin = storage.admin;\n  }, []);\n\n  useEffect(() => {\n    loadContract();\n  }, [loadContract]);\n\n  return {\n    connect,\n    disconnect,\n    isConnected: !!pkh,\n    Tezos,\n    wallet,\n    pkh,\n    contract,\n    storage,\n  };\n});\n\nexport default useBeacon;\n","import React from \"react\";\n\nexport const Button = ({\n  variant = \"filled\",\n  onClick,\n  className,\n  children,\n  disabled = false,\n}) => {\n  return (\n    <button\n      onClick={onClick}\n      disabled={disabled}\n      className={`button ${variant} ${\n        disabled && \"button-disabled\"\n      } ${className}`}\n    >\n      {children}\n    </button>\n  );\n};\n","import axios from \"axios\";\n\nconst api = axios.create({ baseURL: \"https://metadata.templewallet.com\" });\n\nexport async function getTokensMetadata(address, id, timeout = 5000) {\n  const metadata = await api\n    .get(`metadata/${address}/${id}`, { timeout })\n    .then((r) => r.data);\n  return metadata;\n}\n","import React, { useCallback, useEffect, useState } from \"react\";\nimport useBeacon from \"../hooks/useBeacon\";\nimport BigNumber from \"bignumber.js\";\nimport { getTokensMetadata } from \"../utils/tokenMetadata.api\";\nimport { Button } from \"./Button\";\n\nexport const Explore = () => {\n  const { contract, storage, pkh, connect } = useBeacon();\n  const [rewards, setRewards] = useState([]);\n  const [tokens, setTokens] = useState([]);\n  const [loading, setLoading] = useState(true);\n\n  const loadRewards = useCallback(async () => {\n    if (!storage || !storage.vestings_counter || !pkh) {\n      setLoading(false);\n      return;\n    }\n    const limit = storage.vestings_counter;\n    let arr = [];\n    for (let i = 0; i < limit; i++) {\n      const vesting = await storage.vestings.get([i]);\n      arr.push(vesting);\n    }\n    if (pkh) {\n      // arr = arr.filter((x) => x.receiver === pkh || x.admin !== pkh); // for debug\n      arr = arr.filter((x) => x.receiver === pkh || x.admin === pkh);\n    }\n    console.log(arr);\n    setRewards(arr);\n    setLoading(false);\n  }, [storage, pkh]);\n\n  const loadTokensMetadata = useCallback(async () => {\n    if (rewards.length === 0) {\n      return;\n    }\n    for (var i = 0; i < rewards.length; i++) {\n      let token = null;\n      if (rewards[i].asset[\"fa2\"]) {\n        token = await getTokensMetadata(\n          rewards[i].asset.fa2.token,\n          rewards[i].asset.fa2.id.toString()\n        );\n      } else if (rewards[i].asset[\"fa12\"]) {\n        token = await getTokensMetadata(rewards[i].asset.fa12, 0);\n      } else {\n        token = {\n          decimals: 6,\n          name: \"TEZ\",\n          symbol: \"TEZ\",\n          thumbnailUri:\n            \"https://upload.wikimedia.org/wikipedia/commons/thumb/3/33/Tezos_logo.svg/100px-Tezos_logo.svg.png\",\n        };\n      }\n\n      setTokens((prev) => [...prev, token]);\n    }\n  }, [rewards, pkh]);\n\n  useEffect(() => {\n    loadRewards();\n  }, [loadRewards]);\n\n  useEffect(() => {\n    loadTokensMetadata();\n  }, [loadTokensMetadata]);\n\n  const handleClaim = useCallback(\n    async (id) => {\n      if (!contract) return;\n      const claimParams = contract.methods.claim(id);\n      claimParams.send();\n    },\n    [contract]\n  );\n\n  const handleConnect = () => {\n    connect().catch(console.log);\n  };\n  return (\n    <section>\n      <div className=\"search-bar\"></div>\n      <table>\n        <thead>\n          <tr>\n            <th>Full Reward</th>\n            <th>Claimed</th>\n            <th>Pending</th>\n            <th>Ends in</th>\n            <th>{/* action button */}</th>\n          </tr>\n        </thead>\n        <tbody>\n          {rewards.length === 0 ? (\n            loading ? (\n              <tr>\n                <td></td>\n                <td></td>\n                <td>Loading</td>\n              </tr>\n            ) : !pkh ? (\n              <tr>\n                <td></td>\n                <td></td>\n                <td>\n                  <Button onClick={handleConnect}>Connect to continue</Button>\n                </td>\n              </tr>\n            ) : (\n              <tr>\n                <td></td>\n                <td></td>\n                <td>Not found</td>\n              </tr>\n            )\n          ) : (\n            rewards.map((reward, index) => {\n              const token =\n                tokens.length > 0\n                  ? {\n                      symbol: tokens[index].symbol,\n                      decimals: tokens[index].decimals,\n                    }\n                  : { symbol: \"Loading\", decimals: 6 };\n              const tokenName = token.symbol;\n              const fullReward = reward.treasury.div(\n                new BigNumber(10).times(token.decimals)\n              );\n              const collected = reward.collected.div(\n                new BigNumber(10).times(token.decimals)\n              );\n\n              const left = fullReward.minus(collected);\n              return (\n                <tr key={index}>\n                  <td>\n                    {fullReward.toFixed(0)} {tokenName}\n                  </td>\n                  <td>\n                    {collected.toFixed(0)} {tokenName}\n                  </td>\n                  <td>\n                    {left.toFixed(0)} {tokenName}\n                  </td>\n                  <td>{new Date(reward.deadline).toDateString()}</td>\n                  <td>\n                    <Button\n                      disabled={!pkh || left.toFixed(0) === \"0\"}\n                      onClick={() => handleClaim(index)}\n                    >\n                      Claim\n                    </Button>\n                  </td>\n                </tr>\n              );\n            })\n          )}\n        </tbody>\n      </table>\n    </section>\n  );\n};\n","import constate from \"constate\";\nimport { useState } from \"react\";\nimport { Distribute } from \"../components/Distribute\";\nimport { Explore } from \"../components/Explore\";\n\nconst TABS = [\n  { label: \"Distribute\", component: Distribute },\n  { label: \"Explore\", component: Explore },\n  // { label: \"Stop vesting\", component: Explore },\n  // { label: \"Change Admin\", component: Explore },\n];\n\nexport const [UseTabsProvider, useTabs] = constate(() => {\n  const [currentTab, setCurrentTab] = useState(1);\n\n  return { currentTab, setCurrentTab, TABS };\n});\n","import React, { useState } from \"react\";\nimport BigNumber from \"bignumber.js\";\nimport useBeacon from \"../hooks/useBeacon\";\nimport { Button } from \"./Button\";\n\nexport const Distribute = () => {\n  const [value, setValue] = useState(\"\");\n  const [errorJSON, setJSONError] = useState(null);\n  const { contract, storage, pkh } = useBeacon();\n\n  const [{ asset, amount, receiver, deadline }, setFormValue] = useState({\n    asset: \"\",\n    amount: \"\",\n    receiver: \"\",\n    deadline: \"\",\n  });\n\n  const handleChange = (e) => {\n    handleFormValue(e.target.name, e.target.value);\n  };\n\n  const handleFormValue = (name, value) => {\n    setFormValue((prev) => ({ ...prev, [name]: value }));\n  };\n\n  const handleChangeTextArea = (e) => {\n    setJSONError(null);\n    setValue(e.target.value);\n    try {\n      JSON.parse(e.target.value);\n    } catch (e) {\n      setJSONError(`Invalid JSON: ${e.message}`);\n    }\n  };\n\n  const handleDistributeForm = () =>\n    makeRpcCall({ asset, amount, receiver, deadline });\n\n  const handleDistributeJSON = () => {\n    if (errorJSON) {\n      return;\n    }\n    makeRpcCall(JSON.parse(value));\n  };\n\n  const makeRpcCall = async ({ asset, amount, receiver, deadline }) => {\n    const vestingParams = contract.methods.start_vesting(\n      new BigNumber(amount).multipliedBy(10 ** 8).toFixed(),\n      receiver,\n      deadline,\n      asset || \"tez\"\n    );\n    try {\n      await vestingParams.send();\n    } catch (e) {\n      console.log(e);\n      alert(JSON.stringify(e));\n    }\n  };\n  return (\n    <section>\n      <div className=\"section-content\">\n        <h3>Fill form</h3>\n        <div className=\"fill-form\">\n          <div>\n            <label>Asset</label>\n            <input\n              name=\"asset\"\n              value={asset}\n              placeholder={\"asset\"}\n              onChange={handleChange}\n            />\n          </div>\n          <div>\n            <label>Amount</label>\n            <input\n              name=\"amount\"\n              value={amount}\n              placeholder={\"amount\"}\n              onChange={handleChange}\n            />\n          </div>\n          <div>\n            <label>Receiver</label>\n            <input\n              name=\"receiver\"\n              value={receiver}\n              placeholder={\"receiver\"}\n              onChange={handleChange}\n            />\n          </div>\n          <div>\n            <label>Deadline</label>\n            <input\n              name=\"deadline\"\n              value={deadline}\n              type=\"date\"\n              placeholder={\"deadline\"}\n              onChange={handleChange}\n            />\n          </div>\n          <Button\n            disabled={storage && pkh !== storage.admin}\n            onClick={handleDistributeForm}\n            className=\"distribute-button\"\n          >\n            Distribute\n          </Button>\n        </div>\n        <h3>Or use JSON text</h3>\n        <div>\n          <div className=\"textarea\">\n            <textarea\n              value={value}\n              onChange={handleChangeTextArea}\n              placeholder='{ receiver:\"tz1...\", amount: \"100\" }'\n            />\n          </div>\n          {errorJSON && typeof errorJSON === \"string\" && (\n            <div className=\"textarea-error\">{errorJSON}</div>\n          )}\n\n          <Button\n            disabled={storage && pkh !== storage.admin}\n            onClick={handleDistributeJSON}\n            className=\"distribute-button\"\n          >\n            Distribute\n          </Button>\n        </div>\n      </div>\n    </section>\n  );\n};\n","/* eslint-disable jsx-a11y/anchor-is-valid */\nimport React from \"react\";\n\nexport const Tab = ({ onClick, selected = false, disabled, children }) => {\n  const handleClick = () => onClick && !disabled && onClick();\n  return (\n    <div\n      className={`material-tabs-content ${\n        disabled && \"material-tabs-disabled\"\n      }`}\n    >\n      <a onClick={handleClick} className=\"material-tabs-content\" href=\"#\">\n        {children}\n      </a>\n      {selected && <div className=\"material-tabs-underline\"></div>}\n    </div>\n  );\n};\n","import React from \"react\";\n\nexport const Tabs = ({ children }) => {\n  return (\n    <div className=\"material-tabs\">\n      {children}\n      <span className=\"yellow-bar\"></span>\n    </div>\n  );\n};\n","import React from \"react\";\nimport useBeacon from \"../hooks/useBeacon\";\nimport { useTabs } from \"../hooks/useTabs\";\nimport { Button } from \"./Button\";\nimport { Tab } from \"./Tab\";\nimport { Tabs } from \"./Tabs\";\n\nexport const Header = () => {\n  const { connect, disconnect, pkh } = useBeacon();\n  const { TABS, currentTab, setCurrentTab } = useTabs();\n\n  const handleConnect = () => {\n    connect().catch(console.log);\n  };\n\n  const handleDisconnect = () => {\n    disconnect().catch(console.log);\n  };\n  return (\n    <header className=\"App-header\">\n      <Tabs>\n        {TABS.map((tab, index) => (\n          <Tab\n            onClick={() => setCurrentTab(index)}\n            selected={currentTab === index}\n            key={index}\n          >\n            {tab.label}\n          </Tab>\n        ))}\n      </Tabs>\n      <div className=\"header-buttons\">\n        {!pkh && <Button onClick={handleConnect}>Connect</Button>}\n        {pkh && typeof pkh === \"string\" && (\n          <Button variant={\"outlined\"} onClick={handleConnect}>\n            {pkh.slice(0, 6)}...${pkh.slice(-3)}\n          </Button>\n        )}\n        {pkh && (\n          <Button onClick={handleDisconnect} variant=\"filled\">\n            Disconnect\n          </Button>\n        )}\n      </div>\n    </header>\n  );\n};\n","import React from \"react\";\nimport { useTabs } from \"../hooks/useTabs\";\n\nexport const Main = () => {\n  const { TABS, currentTab } = useTabs();\n  const SelectedTab = TABS[currentTab].component;\n  return (\n    <main>\n      <SelectedTab />\n    </main>\n  );\n};\n","import React from \"react\";\nimport \"./material-button.css\";\nimport \"./material-tabs.css\";\nimport \"./App.css\";\nimport { Header } from \"./components/Header\";\nimport { Main } from \"./components/Main\";\nfunction App() {\n  return (\n    <div className=\"App\">\n      <Header />\n      <Main />\n    </div>\n  );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\nimport reportWebVitals from \"./reportWebVitals\";\nimport { UseBeaconProvider } from \"./hooks/useBeacon\";\nimport { UseTabsProvider } from \"./hooks/useTabs\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <UseBeaconProvider>\n      <UseTabsProvider>\n        <App />\n      </UseTabsProvider>\n    </UseBeaconProvider>\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}